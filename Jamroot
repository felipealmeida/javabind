# (c) Copyright 2012 Felipe Magno de Almeida
#
# Distributed under the Boost Software License, Version 1.0. (See
# accompanying file LICENSE_1_0.txt or copy at
# http://www.boost.org/LICENSE_1_0.txt)

import testing ;
import modules ;

path-constant here : . ;

local search_path = [ modules.peek : BOOST_BUILD_PATH ] ;
search_path += $(here)/tools ;
modules.poke : BOOST_BUILD_PATH : $(search_path) ;

import path ;
import java : java-class jar ;

project javabind ;

alias javabind : /boost//headers /jvm//jvm
 : <include>include 
 : : <include>include
 ;
explicit luabind ;

java-class ReadStaticIntAttribute : tests/ReadStaticIntAttribute.java ;
explicit ReadStaticIntAttribute ;
java-class ReadStaticDoubleAttribute : tests/ReadStaticDoubleAttribute.java ;
explicit ReadStaticDoubleAttribute ;
java-class CallVoidMethod : tests/CallVoidMethod.java ;
explicit CallVoidMethod ;
java-class NewObject : tests/NewObject.java ;
explicit NewObject ;
java-class NewObjectIntConstructor : tests/NewObjectIntConstructor.java ;
explicit NewObjectIntConstructor ;

alias runtime-tests
 : [ run tests/create-jvm.cpp javabind /jvm//jvm ]
   [ run tests/read_static_int_attribute.cpp javabind /jvm//jvm : : ReadStaticIntAttribute ]
   [ run tests/read_static_double_attribute.cpp javabind /jvm//jvm : : ReadStaticDoubleAttribute ]
   [ run tests/call_void_method.cpp javabind /jvm//jvm : : CallVoidMethod ]
   [ run tests/new_object.cpp javabind /jvm//jvm : : NewObject ]
   [ run tests/new_object_int_constructor.cpp javabind /jvm//jvm : : NewObjectIntConstructor ]
 ;
explicit runtime-tests ;
